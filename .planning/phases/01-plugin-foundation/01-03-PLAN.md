---
phase: 01-plugin-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01", "01-02"]
files_modified:
  - skills/help/SKILL.md
  - skills/onboard/SKILL.md
  - skills/onboard/templates/vision-template.md
  - skills/onboard/templates/config-defaults.json
  - skills/blueprint/SKILL.md
  - skills/blueprint/templates/gameplan-template.md
  - skills/blueprint/templates/goal-template.md
  - skills/blueprint/templates/step-template.md
  - skills/blueprint/templates/task-template.md
autonomous: true

must_haves:
  truths:
    - "/director:help shows all 11 commands grouped by Blueprint / Build / Inspect / Other with inline examples"
    - "/director:help includes mini-status when .director/ exists showing current project position"
    - "/director:onboard checks for existing .director/ and routes to greenfield interview or brownfield mapping"
    - "/director:blueprint checks for VISION.md and routes to onboard if missing"
    - "All routing messages are conversational, not imperative"
  artifacts:
    - path: "skills/help/SKILL.md"
      provides: "Fully functional help command with dynamic context injection"
      contains: "Blueprint"
      min_lines: 40
    - path: "skills/onboard/SKILL.md"
      provides: "Context-aware onboard command with routing logic"
      contains: "init-director"
      min_lines: 30
    - path: "skills/blueprint/SKILL.md"
      provides: "Context-aware blueprint command with routing logic"
      contains: "VISION.md"
      min_lines: 20
    - path: "skills/onboard/templates/vision-template.md"
      provides: "Template for VISION.md generation"
      min_lines: 15
    - path: "skills/blueprint/templates/gameplan-template.md"
      provides: "Template for GAMEPLAN.md generation"
      min_lines: 10
  key_links:
    - from: "skills/help/SKILL.md"
      to: ".director/STATE.md"
      via: "dynamic context injection for mini-status"
      pattern: "cat.*STATE.md"
    - from: "skills/onboard/SKILL.md"
      to: "scripts/init-director.sh"
      via: "calls init script when .director/ missing"
      pattern: "init-director"
---

<objective>
Create the help command (fully functional with dynamic status), onboard command (with routing and templates), and blueprint command (with routing and templates). These are the Blueprint-group commands.

Purpose: Help is the ONLY fully functional command in Phase 1 -- it must work perfectly. Onboard and blueprint have intelligent routing that detects project state and guides users conversationally. Templates define the structure of .director/ artifacts that will be generated in Phases 2-3.
Output: 3 skill definitions with context-aware routing + 6 templates for .director/ artifacts.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-plugin-foundation/01-RESEARCH.md
@.planning/phases/01-plugin-foundation/01-CONTEXT.md
@.planning/phases/01-plugin-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create fully functional help skill with dynamic mini-status</name>
  <files>skills/help/SKILL.md</files>
  <action>
Create `skills/help/SKILL.md` -- the ONLY fully functional command in Phase 1.

YAML frontmatter:
- name: help
- description: "Show Director commands with examples. Use when the user asks what Director can do, how to use it, or needs guidance." (Keep under 150 chars to stay within context budget)

Markdown body -- the help command must:

1. Use dynamic context injection to check project state:
   `!`cat .director/STATE.md 2>/dev/null || echo "NO_PROJECT"``

2. If project exists, show a mini-status header before the command list:
   "You're working on [project name]. [Current position summary]."
   Parse the STATE.md content to extract current goal/step/task status.

3. If no project exists, show a welcome message:
   "Welcome to Director! Here's what you can do:"

4. Show commands grouped by workflow stage (per user decision):

   **Blueprint** (Plan Your Project):
   - `/director:onboard` -- Set up a new project or map an existing one. Example: `/director:onboard`
   - `/director:blueprint` -- Create, view, or update your gameplan. Example: `/director:blueprint "add payment processing"`

   **Build** (Make Progress):
   - `/director:build` -- Work on the next ready task. Example: `/director:build`
   - `/director:quick "..."` -- Fast change without full planning. Example: `/director:quick "change the button color to blue"`

   **Inspect** (Check Your Work):
   - `/director:inspect` -- Verify what was built matches the goal. Example: `/director:inspect`

   **Other:**
   - `/director:status` -- See your progress. Example: `/director:status`
   - `/director:resume` -- Pick up where you left off. Example: `/director:resume`
   - `/director:brainstorm` -- Think out loud with full project context. Example: `/director:brainstorm "what about real-time collab?"`
   - `/director:pivot` -- Handle a change in direction. Example: `/director:pivot`
   - `/director:idea "..."` -- Capture an idea for later. Example: `/director:idea "add dark mode"`
   - `/director:help` -- Show this guide. Example: `/director:help`

5. After the command list, if no project exists, suggest starting with `/director:onboard`:
   "New here? Start with `/director:onboard` to set up your project."

6. Include `$ARGUMENTS` at the end to support inline text (e.g., `/director:help onboard` could show detailed help for that command -- but for Phase 1, just show the full list regardless of arguments).

IMPORTANT: The description field must stay under 150 characters. All detailed content goes in the markdown body.
  </action>
  <verify>
Verify skill exists: `test -f skills/help/SKILL.md && echo "OK"`.
Verify frontmatter has required fields: `grep "name: help" skills/help/SKILL.md`.
Verify all 11 commands are listed: `grep -c "/director:" skills/help/SKILL.md` should return 11+.
Verify grouping exists: `grep "Blueprint\|Build\|Inspect\|Other" skills/help/SKILL.md`.
Verify dynamic context injection: `grep "cat.*STATE.md" skills/help/SKILL.md`.
  </verify>
  <done>Help skill shows all 11 commands grouped by workflow stage with inline examples, includes dynamic mini-status when project exists, and suggests /director:onboard for new users.</done>
</task>

<task type="auto">
  <name>Task 2: Create onboard and blueprint skills with routing logic and templates</name>
  <files>skills/onboard/SKILL.md, skills/onboard/templates/vision-template.md, skills/onboard/templates/config-defaults.json, skills/blueprint/SKILL.md, skills/blueprint/templates/gameplan-template.md, skills/blueprint/templates/goal-template.md, skills/blueprint/templates/step-template.md, skills/blueprint/templates/task-template.md</files>
  <action>
**Create `skills/onboard/SKILL.md`:**

YAML frontmatter:
- name: onboard
- description: "Set up a new project or map an existing one. Creates your vision document through a guided interview."
- disable-model-invocation: true

Markdown body -- onboard routing logic:

1. Check if `.director/` exists. If not, create it silently by running init-director.sh. Say only "Director is ready." and continue.

2. Check if `.director/VISION.md` has real content (not just the empty template). If it has content:
   - Check if this looks like a brownfield project (existing codebase files beyond .director/). Per user decision: an agent should inspect the codebase to determine if this is greenfield or brownfield -- not just skip/reset.
   - Say: "You already have a vision document. Want to update it, or would you like me to map your existing codebase first?"

3. If VISION.md is empty/template:
   - Say: "Let's figure out what you're building. I'll ask you some questions one at a time."
   - Then say: "This interview will be fully functional in a future update. For now, you can create your vision manually in `.director/VISION.md`. Here's what goes in it: [brief section overview from the template]."

4. Include `$ARGUMENTS` for inline context support (e.g., `/director:onboard "a task management app"`).

5. Git is auto-initialized silently in init-director.sh -- do NOT mention git anywhere in this skill.

**Create `skills/onboard/templates/vision-template.md`:**
Template for VISION.md with sections:
- Project Name
- What It Does (1-2 sentence plain-language summary)
- Who It's For (target users)
- Key Features (bulleted list)
- Tech Stack (languages, frameworks, databases, hosting)
- Success Looks Like (what "done" means)
- Decisions Made (key choices and why)
- Open Questions (things still unclear, marked with [UNCLEAR])

**Create `skills/onboard/templates/config-defaults.json`:**
The default config.json content (same as what init-director.sh creates, kept here as the canonical template):
```json
{
  "config_version": 1,
  "mode": "guided",
  "tips": true,
  "verification": true,
  "cost_tracking": true,
  "doc_sync": true,
  "max_retry_cycles": 3,
  "language": "en",
  "agents": {
    "interviewer": { "model": "inherit" },
    "planner": { "model": "inherit" },
    "researcher": { "model": "inherit" },
    "mapper": { "model": "haiku" },
    "builder": { "model": "inherit" },
    "verifier": { "model": "haiku" },
    "debugger": { "model": "inherit" },
    "syncer": { "model": "haiku" }
  }
}
```

**Create `skills/blueprint/SKILL.md`:**

YAML frontmatter:
- name: blueprint
- description: "Create, view, or update your project gameplan. Breaks your vision into Goals, Steps, and Tasks."
- disable-model-invocation: true

Markdown body -- blueprint routing logic:

1. Check if `.director/` exists. If not, create it silently. Say "Director is ready."

2. Check if `.director/VISION.md` has real content. If not:
   - Say: "Before creating a gameplan, we need to understand what you're building. Want to start with `/director:onboard`? It's a quick interview to capture your vision."
   - Wait for user response. If they agree, proceed as if they invoked /director:onboard.

3. If VISION.md has content, check if GAMEPLAN.md has content. If no gameplan:
   - Say: "This command will be fully functional in a future update. Once it is, it will read your vision and create a gameplan with Goals, Steps, and Tasks."

4. If gameplan exists:
   - Say: "This command will be fully functional in a future update. Once it is, it will let you view and update your gameplan."

5. Include `$ARGUMENTS` for inline context (e.g., `/director:blueprint "add payment processing"`).

**Create blueprint templates:**

`skills/blueprint/templates/gameplan-template.md`:
- Header: "# Gameplan"
- Sections: Overview (project summary), Goals (numbered list), Current Focus

`skills/blueprint/templates/goal-template.md`:
- Header: "# Goal N: [Goal Name]"
- Sections: What Success Looks Like, Steps (numbered), Status

`skills/blueprint/templates/step-template.md`:
- Header: "# Step N: [Step Name]"
- Sections: What This Delivers, Tasks (checklist), Needs First (dependencies in plain language)

`skills/blueprint/templates/task-template.md`:
- Header: "# Task: [Task Name]"
- Sections: What To Do, Why It Matters, Size (small/medium/large), Done When (acceptance criteria), Needs First (plain-language prerequisites)

ALL templates use Director's terminology (Goal/Step/Task, never Phase/Sprint/Ticket). Follow plain-language-guide.md conventions.
  </action>
  <verify>
Verify all files exist: `ls skills/onboard/SKILL.md skills/onboard/templates/vision-template.md skills/onboard/templates/config-defaults.json skills/blueprint/SKILL.md skills/blueprint/templates/gameplan-template.md skills/blueprint/templates/goal-template.md skills/blueprint/templates/step-template.md skills/blueprint/templates/task-template.md`.
Verify onboard skill has routing: `grep "VISION.md" skills/onboard/SKILL.md`.
Verify blueprint skill has routing: `grep "VISION.md" skills/blueprint/SKILL.md`.
Verify config-defaults.json is valid JSON: `python3 -m json.tool skills/onboard/templates/config-defaults.json`.
Verify templates use Director terminology: `grep -r "Goal\|Step\|Task" skills/blueprint/templates/` should find matches; `grep -r "Sprint\|Ticket\|Phase" skills/blueprint/templates/` should find nothing.
  </verify>
  <done>Onboard skill has context-aware routing with brownfield detection logic and all templates. Blueprint skill has routing that checks for VISION.md first and redirects to onboard if missing. All 6 templates use Director's terminology and plain-language conventions.</done>
</task>

</tasks>

<verification>
1. Help skill lists all 11 commands in 4 groups with inline examples
2. Help skill uses dynamic context injection for mini-status
3. Onboard skill creates .director/ silently and routes based on VISION.md state
4. Blueprint skill routes to onboard when VISION.md is missing
5. All routing messages are conversational (no imperative commands)
6. Templates exist for VISION.md, config.json, GAMEPLAN.md, GOAL.md, STEP.md, task files
7. All templates use Director's vocabulary, never developer jargon
</verification>

<success_criteria>
Help command is fully functional with dynamic mini-status. Onboard and blueprint commands have intelligent routing. Six artifact templates define the structure of .director/ documents using Director's terminology.
</success_criteria>

<output>
After completion, create `.planning/phases/01-plugin-foundation/01-03-SUMMARY.md`
</output>
