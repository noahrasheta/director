---
phase: 02-onboarding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/onboard/SKILL.md
autonomous: true

must_haves:
  truths:
    - "Running /director:onboard on a new project starts a one-question-at-a-time interview"
    - "Interview uses multiple choice options when possible"
    - "Interview surfaces decisions the user has not considered (auth, hosting, data storage, tech stack)"
    - "Interview adapts to user's preparation level -- skips basics for prepared users, guides exploratory users"
    - "Ambiguous answers are flagged with [UNCLEAR] markers and clarified before proceeding"
    - "After interview, user is shown a complete VISION.md draft for confirmation before saving"
    - "Confirmed vision is written to .director/VISION.md following the canonical template structure"
    - "User is directed to /director:blueprint as the next step"
    - "$ARGUMENTS passed to /director:onboard are treated as initial context, not ignored"
  artifacts:
    - path: "skills/onboard/SKILL.md"
      provides: "Full greenfield onboarding workflow with inline interview orchestration"
      contains: "## Greenfield"
      min_lines: 100
  key_links:
    - from: "skills/onboard/SKILL.md"
      to: "skills/onboard/templates/vision-template.md"
      via: "Vision generation follows template structure"
      pattern: "vision-template"
    - from: "skills/onboard/SKILL.md"
      to: "agents/director-interviewer.md"
      via: "Interview rules referenced inline"
      pattern: "interview"
    - from: "skills/onboard/SKILL.md"
      to: "scripts/init-director.sh"
      via: "Init script called when .director/ missing"
      pattern: "init-director"
---

<objective>
Replace the placeholder onboard skill with a fully functional greenfield onboarding workflow that conducts an adaptive, one-question-at-a-time interview and generates VISION.md.

Purpose: This is the entry point for every new Director project. Without a working onboard flow, users cannot start using Director. The greenfield path (new project) is the most common entry and must work before brownfield support is added.

Output: A rewritten `skills/onboard/SKILL.md` that orchestrates the complete greenfield onboarding workflow inline -- detection, interview, vision generation, and file writing.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-onboarding/02-RESEARCH.md

# Source files to read before implementing
@skills/onboard/SKILL.md
@agents/director-interviewer.md
@skills/onboard/templates/vision-template.md
@scripts/init-director.sh
@reference/terminology.md
@reference/plain-language-guide.md
@reference/context-management.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite onboard SKILL.md with complete greenfield workflow</name>
  <files>skills/onboard/SKILL.md</files>
  <action>
Rewrite the onboard SKILL.md to replace the placeholder message with a fully functional greenfield onboarding workflow. The skill runs INLINE in the main conversation (NOT forked). Claude follows the instructions step by step.

**Structure the SKILL.md with these sections:**

**1. Init Check (keep existing)**
Keep the existing init script check: if `.director/` does not exist, run `bash "${CLAUDE_PLUGIN_ROOT}/scripts/init-director.sh"` silently. Say only "Director is ready." then continue.

**2. Project State Detection**
Read `.director/VISION.md` and determine the project state. The detection must handle BOTH template formats:
- Init script template: contains `> This file will be populated when you run /director:onboard` or headings like `## What are we building?` with no content beneath them
- Onboard template: contains italic placeholder text like `_What are you calling this project?_`
- Either of these means "not yet onboarded"

If VISION.md has real content (substantive text under headings, not just placeholders) -> already onboarded path (offer to update or map code -- keep the existing already-onboarded handling).

Check for existing source files beyond `.director/` (package.json, requirements.txt, go.mod, Cargo.toml, Gemfile, or src/, app/, lib/, pages/ directories). If found -> brownfield path. Add a placeholder for brownfield that says: "I see you have existing code. Brownfield onboarding is coming soon. For now, let's start with an interview about your project." Then proceed to greenfield interview.

If no existing source files -> greenfield path (the main focus of this task).

**3. $ARGUMENTS Handling**
If the user provided arguments via `$ARGUMENTS` (e.g., `/director:onboard "a task management app"`), treat them as initial context about the project. Confirm understanding of what they described, then continue the interview from there (skip "What are you building?" since they already answered it).

**4. Greenfield Interview (inline, following interviewer agent rules)**
Include the interview instructions INLINE in the skill. Do NOT spawn the interviewer as a sub-agent. Reference the interviewer agent's rules by embedding them directly:

Interview rules (from agents/director-interviewer.md):
1. ONE question at a time -- never batch questions
2. Multiple choice when possible (A, B, C options; user can always type custom answer)
3. Gauge preparation level from first 1-2 answers:
   - Detailed, specific answer (e.g., "SaaS habit tracker with Next.js, Supabase, Clerk") -> skip basics, jump to gaps
   - Vague answer (e.g., "I want to build an app") -> slow down, more guidance, more multiple choice
4. Surface decisions the user hasn't considered: auth, data storage, tech stack, real-time features, file uploads, payments, third-party services, hosting
5. Confirm understanding before moving on -- briefly restate what you heard
6. Flag ambiguity with [UNCLEAR] markers -- if answer is vague or contradictory, mark it and ask follow-up
7. Adapt to what's already known -- skip answered questions
8. Don't ask about irrelevant things (no load balancing for a personal tool)
9. Read the room -- pick up pace if user is impatient, slow down if unsure

Interview sections (work through in order, skipping irrelevant ones):
1. What are you building? (1-2 sentence summary -- becomes the elevator pitch)
2. Who is it for? (target users -- themselves, a team, customers, public?)
3. Key features (start with top 3, then ask for more; group naturally)
4. Tech stack (suggest based on features, explain WHY each choice fits THIS project, respect user preferences)
5. Where will it live? (hosting -- offer simple options: Vercel, Netlify, Railway, or "figure it out later")
6. What does "done" look like? (success criteria -- what makes v1 complete?)
7. Decisions already made (tech stack choices, design style, specific libraries)
8. Anything you're unsure about? (concerns, unknowns, areas for guidance -> become research tasks)

Target 8-15 questions for a typical new project. Skip entire sections that aren't relevant. If the user seems ready to move on, wrap up early.

**5. Vision Generation**
After the interview completes, generate VISION.md content following the canonical template structure from `skills/onboard/templates/vision-template.md`:
- Project Name
- What It Does
- Who It's For
- Key Features (must-have vs nice-to-have)
- Tech Stack
- Success Looks Like
- Decisions Made (table format: Decision | Why)
- Open Questions (with [UNCLEAR] markers for unresolved items)

Present the complete vision to the user: "Here's what I captured from our conversation. Take a look and let me know if anything needs changing."

Show the full document. Wait for user to confirm or request changes. Make requested changes, then confirm again. Iterate until user approves.

**6. File Writing and Next Steps**
Once approved, write the content to `.director/VISION.md` using the Write tool. Keep the tone conversational during file operations -- say "Your vision is saved." not "Writing VISION.md to .director/VISION.md..."

Suggest next step conversationally: "Ready to create a gameplan? You can do that with `/director:blueprint`."

**Language requirements throughout:**
- Follow reference/plain-language-guide.md: conversational, not imperative
- Follow reference/terminology.md: Vision not "spec", Gameplan not "roadmap", Goal/Step/Task not developer terms
- Never mention file paths as the primary communication -- lead with what it means
- Never blame the user
- Celebrate decisions naturally

**Important structural notes:**
- The SKILL.md should keep `disable-model-invocation: false` (default) or omit it -- the skill needs Claude to run
- Keep the existing YAML frontmatter (name, description)
- The $ARGUMENTS line must remain at the end of the file
- Do NOT add `context: fork` -- the skill runs inline
  </action>
  <verify>
Read the completed skills/onboard/SKILL.md and verify:
1. File has valid YAML frontmatter with name: onboard and description
2. Init script check is present (bash "${CLAUDE_PLUGIN_ROOT}/scripts/init-director.sh")
3. Detection logic handles both init-script template and onboard template placeholders
4. Already-onboarded path offers update or map options
5. Brownfield detection is present (even if placeholder for now)
6. $ARGUMENTS handling is present and treats arguments as initial context
7. All 9 interview rules are embedded in the greenfield section
8. All 8 interview sections are present
9. Preparation level adaptation is described (gauge from first answers)
10. Vision generation section references the canonical template structure with all 8 sections
11. User confirmation step is present before writing VISION.md
12. Conversational file-writing instructions are present
13. Next step suggestion (/director:blueprint) is present
14. $ARGUMENTS placeholder is at the end of the file
15. No `context: fork` in frontmatter
16. File is at least 100 lines (a complete workflow requires substantial instruction)
  </verify>
  <done>
The onboard SKILL.md contains a complete greenfield workflow: detection handles both template formats, $ARGUMENTS are treated as initial context, interview follows all 9 rules with all 8 sections inline, vision is generated from canonical template, user confirms before save, and next step is suggested conversationally. Brownfield detection is present with a temporary redirect to greenfield.
  </done>
</task>

</tasks>

<verification>
1. Read skills/onboard/SKILL.md and confirm the file is well-structured with clear section headings
2. Verify no developer jargon appears in user-facing messages (check against reference/terminology.md never-use list)
3. Confirm the vision template sections in the generation step match the canonical template at skills/onboard/templates/vision-template.md
4. Confirm $ARGUMENTS is handled and appears at the end of the file
</verification>

<success_criteria>
- skills/onboard/SKILL.md contains a complete greenfield onboarding workflow (no placeholders, no "coming soon" for greenfield)
- The interview is adaptive: preparation level gauging, section skipping, [UNCLEAR] markers
- Vision generation follows the canonical template structure
- User confirmation is required before VISION.md is written
- The brownfield path is detected but temporarily redirects to greenfield interview
- All user-facing text follows Director's plain-language conventions
</success_criteria>

<output>
After completion, create `.planning/phases/02-onboarding/02-01-SUMMARY.md`
</output>
