---
phase: 06-progress-continuity
plan: "03"
type: execute
wave: 3
depends_on: ["06-01", "06-02"]
files_modified:
  - skills/status/SKILL.md
autonomous: true

must_haves:
  truths:
    - "Running /director:status shows progress bars for each goal with percentage"
    - "Each goal shows step breakdown with fraction counts (e.g., 'Step 2: 3/7 tasks')"
    - "Blocked steps show plain-language reasons inline (e.g., 'needs login page first')"
    - "A 'Ready to work on' suggestion appears at the bottom -- informational, not pushy"
    - "Running /director:status cost shows detailed per-step cost breakdown"
    - "Cost summary appears inline with each goal in default view"
    - "Progress is calculated from file system (ground truth), not just STATE.md"
  artifacts:
    - path: "skills/status/SKILL.md"
      provides: "Full status display with progress bars, step counts, blocked reasons, cost, and ready-work suggestion"
      min_lines: 100
  key_links:
    - from: "skills/status/SKILL.md"
      to: ".director/STATE.md"
      via: "Dynamic context injection reading STATE.md"
      pattern: "cat .director/STATE.md"
    - from: "skills/status/SKILL.md"
      to: ".director/GAMEPLAN.md"
      via: "Dynamic context injection reading GAMEPLAN.md"
      pattern: "cat .director/GAMEPLAN.md"
    - from: "skills/status/SKILL.md"
      to: ".director/goals/"
      via: "File system scanning for .done.md ground truth"
      pattern: "done\\.md"
---

<objective>
Rewrite the status skill from a placeholder into a fully functional progress display with visual progress bars, step breakdowns, blocked-reason display, cost summary, and ready-work suggestions.

Purpose: `/director:status` is the user's primary way to see where their project stands at a glance. It must feel like a dashboard -- clear, visual, and immediately useful. The display follows locked decisions: goal-level progress bars, step fraction counts (tasks as counts only, not listed individually), informational ready-work suggestion at the bottom, and inline cost per goal.

Output: Complete rewrite of `skills/status/SKILL.md` with full progress display logic.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-progress-continuity/06-RESEARCH.md
@.planning/phases/06-progress-continuity/06-01-SUMMARY.md
@.planning/phases/06-progress-continuity/06-02-SUMMARY.md
@skills/status/SKILL.md
@skills/build/SKILL.md
@reference/plain-language-guide.md
@reference/terminology.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite status skill with full progress display</name>
  <files>skills/status/SKILL.md</files>
  <action>
Complete rewrite of `skills/status/SKILL.md`. Replace the entire file. Keep the same YAML frontmatter (name: status, description, disable-model-invocation: true) but rewrite everything else.

**Structure the skill with these sections:**

### YAML Frontmatter
```yaml
---
name: status
description: "See your project progress at a glance."
disable-model-invocation: true
---
```

### Role and References
"You are Director's status command. Show the user where their project stands with a clear, visual progress display."

Reference plain-language-guide.md and terminology.md (same pattern as existing skills).

### Dynamic Context
Inject three sources:
1. `<project_state>` -- `cat .director/STATE.md`
2. `<project_config>` -- `cat .director/config.json`
3. `<gameplan>` -- `cat .director/GAMEPLAN.md`

### Step 1: Check for a project
If `<project_state>` contains "NO_PROJECT", route to onboard (same pattern as current).

### Step 2: Check for arguments
If `$ARGUMENTS` contains "cost" or "detailed", set a flag to show the detailed cost breakdown view (Step 6 below).
Otherwise, show the default progress view (Steps 3-5).

### Step 3: Calculate progress from file system (ground truth)
This is critical. The skill must verify STATE.md data against the actual file system:

1. Scan `.director/goals/` directory structure
2. For each goal directory, list step directories
3. For each step, count total `.md` files and `.done.md` files in `tasks/`
4. Use these file system counts as the authoritative progress data
5. If STATE.md counts disagree with file system counts, use file system counts

Format the calculations:
- Per-goal: total tasks across all steps, completed tasks across all steps, percentage
- Per-step: total tasks in step, completed tasks in step

### Step 4: Render default progress display
Generate the visual output following the LOCKED display format exactly:

```
Your project at a glance:

Goal 1: [goal name from gameplan]
[████████████────────] 57%    ~320K tokens (~$3.20)
  Step 1: [step name] -- 4/4 tasks (done)
  Step 2: [step name] -- 2/5 tasks (in progress)
  Step 3: [step name] -- 0/3 tasks (needs login page first)
  Step 4: [step name] -- 0/2 tasks

Goal 2: [goal name from gameplan]
[────────────────────] 0%    0 tokens ($0.00)
  Step 1: [step name] -- 0/3 tasks
  Step 2: [step name] -- 0/4 tasks
  Step 3: [step name] -- 0/2 tasks

Total: 8 of 23 tasks complete across 2 goals

---

Ready to work on: [plain-language description of next ready task].
Want to keep building? Just say go, or run /director:build.
```

**Progress bar rules (LOCKED):**
- 20 characters wide using `█` (filled) and `─` (empty)
- `filled = round(percentage / 5)`, remaining = `20 - filled`
- Percentage shown inline after the bar
- Cost shown inline after percentage (from STATE.md's per-goal Cost field)

**Step listing rules (LOCKED):**
- Fraction format: "X/Y tasks"
- Status indicators ONLY for steps that have relevant status:
  - `(done)` when all tasks complete
  - `(in progress)` when some tasks complete
  - `(needs [reason] first)` for blocked steps -- read the "Needs First" section from the first pending task in the step to determine the plain-language reason
  - No status indicator for steps that haven't started and aren't blocked

**Blocked items (Claude's Discretion -- use INLINE treatment):**
Show blocked reasons inline with the step listing. To determine if a step is blocked:
1. Check the first pending (non-.done.md) task in the step
2. Read its "Needs First" section
3. If it references capabilities from an incomplete prior step, the step is blocked
4. Show the reason in plain language: `(needs [capability] first)`

**Ready-work suggestion (LOCKED -- informational, not pushy):**
Use the same task selection algorithm as the build skill (Step 4 in build/SKILL.md):
1. Find the next ready task using the gameplan hierarchy
2. Describe it in one plain-language sentence
3. Follow with "Want to keep building? Just say go, or run /director:build."

**Total summary line:**
Between goals and the suggestion: "Total: N of M tasks complete across G goals"

### Step 5: Handle empty states
- No goals defined: "No goals in your gameplan yet. Run `/director:blueprint` to create one."
- All goals complete: Show full progress (all bars at 100%), then: "Everything in your gameplan is done! Want to add more goals with `/director:blueprint`, or review what you've built with `/director:inspect`?"

### Step 6: Detailed cost breakdown (argument-triggered)
When `$ARGUMENTS` contains "cost" or "detailed", show expanded cost view:

```
Cost breakdown:

Goal 1: [goal name]
  Total: ~320K tokens (~$3.20)
  Step 1: [step name] -- ~120K tokens (~$1.20)
  Step 2: [step name] -- ~200K tokens (~$2.00)
  Step 3: [step name] -- not started
  Step 4: [step name] -- not started

Goal 2: [goal name]
  Not started

Project total: ~320K tokens (~$3.20)

Note: These are estimates based on context size. Actual costs
may vary based on model, caching, and response length.
```

For the per-step breakdown, sum the token estimates from Recent Activity entries in STATE.md that belong to each step (by cross-referencing task names with step directories). If this cross-referencing is too complex, show per-goal totals only and note that step-level breakdown will be available in a future update.

### Language Reminders
Same as other skills: Director vocabulary, no git jargon, no file paths in user-facing output.

End with `$ARGUMENTS` on its own line (for dynamic argument injection).
  </action>
  <verify>
Read the completed skill file. Verify it contains: dynamic context injection for STATE.md, GAMEPLAN.md, and config.json; file system scanning logic for .done.md counting; progress bar rendering instructions with block characters; step listing with fraction counts; blocked item detection logic; ready-work suggestion at bottom; $ARGUMENTS handling for "cost"/"detailed"; empty state handling; language reminders referencing terminology.md and plain-language-guide.md.
  </verify>
  <done>
Status skill shows visual progress bars per goal, step breakdowns with fraction counts, inline blocked-reason display, cost summary per goal, ready-work suggestion at bottom, and detailed cost breakdown via `/director:status cost`. Progress is calculated from file system ground truth. Display format matches all locked decisions exactly.
  </done>
</task>

</tasks>

<verification>
1. Status skill has dynamic context injection for STATE.md, GAMEPLAN.md, and config.json
2. Progress bars use correct block characters (20-wide, percentage shown)
3. Steps show fraction counts (X/Y tasks format)
4. Blocked steps show inline plain-language reasons
5. Ready-work suggestion is present at the bottom (informational tone)
6. Cost appears inline with each goal in default view
7. Detailed cost view triggered by $ARGUMENTS containing "cost" or "detailed"
8. File system scanning for .done.md provides ground truth progress
9. Empty states handled (no goals, all complete)
10. Language reminders present
</verification>

<success_criteria>
- `/director:status` produces a visual dashboard with progress bars, step counts, cost, and ready-work suggestion
- All locked decisions honored: goal-level bars, fraction counts for steps/tasks, tasks as counts only, informational suggestion, inline cost
- `/director:status cost` shows expanded per-goal cost breakdown
- Progress calculated from file system (not just STATE.md) to prevent stale data
- Blocked items displayed inline with plain-language reasons
</success_criteria>

<output>
After completion, create `.planning/phases/06-progress-continuity/06-03-SUMMARY.md`
</output>
