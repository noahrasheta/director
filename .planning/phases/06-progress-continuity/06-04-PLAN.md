---
phase: 06-progress-continuity
plan: "04"
type: execute
wave: 3
depends_on: ["06-01", "06-02"]
files_modified:
  - skills/resume/SKILL.md
autonomous: true

must_haves:
  truths:
    - "Running /director:resume shows a plain-language summary of what was last completed"
    - "Resume detects and reports external changes (modified files outside Director workflow)"
    - "External changes that overlap with the next task are explicitly flagged"
    - "Resume ends with a suggested next action"
    - "Tone adapts based on how long the user was away (hours vs days)"
    - "Resume filters out noise from build artifacts, IDE files, and .director/ changes"
  artifacts:
    - path: "skills/resume/SKILL.md"
      provides: "Full resume skill with last session recap, external change detection, tone adaptation, and suggested next action"
      min_lines: 100
  key_links:
    - from: "skills/resume/SKILL.md"
      to: ".director/STATE.md"
      via: "Dynamic context injection reading STATE.md for last session and recent activity"
      pattern: "cat .director/STATE.md"
    - from: "skills/resume/SKILL.md"
      to: "git log"
      via: "Dynamic context injection for recent commits"
      pattern: "git log"
    - from: "skills/resume/SKILL.md"
      to: "git diff"
      via: "Dynamic context injection for external change detection"
      pattern: "git diff"
---

<objective>
Rewrite the resume skill from a placeholder into a fully functional context-restoration command with last-session summary, external change detection, tone adaptation based on break length, and suggested next action.

Purpose: `/director:resume` is the user's re-entry point after any break. It bridges the gap between sessions by reconstructing what happened, detecting what changed while they were away, and suggesting what to do next. The tone adapts from efficient (short break) to warm with full context (long break).

Output: Complete rewrite of `skills/resume/SKILL.md` with full resume logic.
</objective>

<execution_context>
@/Users/noahrasheta/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahrasheta/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-progress-continuity/06-RESEARCH.md
@.planning/phases/06-progress-continuity/06-01-SUMMARY.md
@.planning/phases/06-progress-continuity/06-02-SUMMARY.md
@skills/resume/SKILL.md
@skills/build/SKILL.md
@reference/plain-language-guide.md
@reference/terminology.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite resume skill with context restoration and change detection</name>
  <files>skills/resume/SKILL.md</files>
  <action>
Complete rewrite of `skills/resume/SKILL.md`. Replace the entire file. Keep the same YAML frontmatter but rewrite all logic.

**Structure the skill with these sections:**

### YAML Frontmatter
```yaml
---
name: resume
description: "Pick up where you left off after a break. Restores your context automatically."
disable-model-invocation: true
---
```

### Role and References
"You are Director's resume command. Help the user pick up where they left off by summarizing what happened last time, detecting what changed while they were away, and suggesting what to do next."

Reference plain-language-guide.md and terminology.md.

### Dynamic Context
Inject four sources:
1. `<project_state>` -- `cat .director/STATE.md 2>/dev/null || echo "NO_PROJECT"`
2. `<project_config>` -- `cat .director/config.json 2>/dev/null || echo "{}"`
3. `<recent_git>` -- `git log --oneline -20 2>/dev/null || echo "NO_GIT"`
4. `<external_changes>` -- `git diff --stat 2>/dev/null || echo "NO_CHANGES"`

### Step 1: Check for a project
If `<project_state>` contains "NO_PROJECT", say:
"No project to resume. Want to get started with `/director:onboard`? I'll ask a few questions about what you're building."
Stop here.

### Step 2: Calculate break length and select tone
Parse the `**Last session:**` field from STATE.md. Calculate time elapsed between that date and today.

**Tone rules (Claude's Discretion -- using context-sensitive recommendation from research):**

| Break Length | Tone | Opening |
|---|---|---|
| Under 2 hours | Efficient, no fanfare | "Picking up where you left off." |
| 2-24 hours | Balanced | "Welcome back." |
| 1-7 days | Warm, more context | "Welcome back! It's been [N] days." |
| Over 7 days | Full recap | "Welcome back! It's been a while. Let me bring you up to speed." |

If `**Last session:**` is missing or unparseable, default to the "1-7 days" tone (balanced with context).

### Step 3: Reconstruct last session
Read the `## Recent Activity` section from STATE.md. Identify entries from the last session date.

Summarize what was accomplished in plain language:
- Focus on outcomes, not tasks: "You finished building the login page" not "Completed task 03-login-form.md"
- If multiple tasks were completed, group them: "You knocked out three tasks on the signup flow"
- If only one task was completed: describe it specifically
- If no recent activity found: "No recent activity recorded."

### Step 4: Detect external changes
Parse `<external_changes>` (git diff --stat output) for meaningful modifications.

**Filter OUT these categories (noise reduction):**
- `node_modules/`, `.next/`, `dist/`, `build/`, `target/` (build artifacts)
- `.director/` (managed by Director)
- `.idea/`, `.vscode/`, `.DS_Store`, `*.swp`, `*.swo` (IDE/editor files)
- `package-lock.json`, `yarn.lock`, `pnpm-lock.yaml` (lockfiles -- flag only if package.json also changed)
- `*.pyc`, `__pycache__/` (Python artifacts)

**For remaining changes:**
1. List each modified file in plain language (describe the file's purpose if recognizable, e.g., "the login page" not "src/pages/Login.tsx")
2. Cross-reference with the next ready task: check if any modified file appears in or relates to the upcoming task's scope
3. If a modified file overlaps with the next task, flag it explicitly: "[file description] was modified -- this might affect the [task description] you're about to start."

**Also check for commits made outside Director:**
Parse `<recent_git>` for commits made after the `**Last session:**` date that don't follow Director's commit message pattern. If found: "Some changes were made outside Director since your last session."

If no meaningful external changes: "No changes detected since your last session."

### Step 5: Show current position
Provide a brief progress snapshot:
- "You're [X] of [Y] steps through [goal name]."
- If a goal was just completed: "You finished [goal name]! [Next goal] is up next."
- If all goals complete: "Your project is done! Everything in the gameplan has been built."

Read progress from STATE.md's Progress section (or scan file system if STATE.md looks stale).

### Step 6: Suggest next action (LOCKED -- ends with suggestion)
Find the next ready task using the same logic as build/status skills.

**Format (LOCKED):**
For short breaks: "Next up: [task description]. Just say go."
For medium breaks: "Ready to start [task description]? Just say go."
For long breaks: "When you're ready, the next thing to work on is [task description]. Just say go, or run `/director:status` for the full picture."

### Step 7: Assemble and present
Combine all sections into a single cohesive message. The flow should be:

1. Opening (tone-appropriate greeting)
2. Last session recap (what you did)
3. External changes (if any -- skip section entirely if none)
4. Current position (where you are)
5. Suggested next action (what's next)

**Example output for a 3-day break with external changes:**

```
Welcome back! It's been 3 days. Here's where things stand:

Last time, you finished building the login page -- users can now
type their email and password to sign in.

Since then:
- The login page was modified -- this might affect the signup task
  you're about to start.
- No other changes detected.

You're 2 of 4 steps through Goal 1 (user accounts).

Ready to start the signup flow? Just say go.
```

**Example output for a 30-minute break with no changes:**

```
Picking up where you left off. You just finished the form
validation for the login page.

You're 2 of 4 steps through Goal 1 (user accounts).

Next up: connect the login form to the authentication system.
Just say go.
```

### Language Reminders
Same as other skills: Director vocabulary, no git jargon, no file paths in user-facing output. Specifically for resume:
- Say "since your last session" not "since your last commit"
- Say "was modified" not "has uncommitted changes"
- Say "changes were made outside Director" not "non-Director commits detected"
- Never show git SHAs, branch names, or diff stats to the user

End with `$ARGUMENTS` on its own line.
  </action>
  <verify>
Read the completed skill file. Verify it contains: dynamic context injection for STATE.md, git log, git diff; break length calculation from Last session field; tone selection table with 4 tiers; last session reconstruction from Recent Activity; external change detection with noise filtering (at least node_modules, .director/, .idea/.vscode); cross-referencing changes with next task scope; progress snapshot; suggested next action ending; two example outputs demonstrating different tones; language reminders; $ARGUMENTS at the end.
  </verify>
  <done>
Resume skill provides plain-language context restoration with: last session summary from Recent Activity in STATE.md, external change detection filtering noise from build artifacts/IDE files/.director, explicit flagging when changes overlap with next task, tone adaptation based on break length (4 tiers), progress snapshot, and suggested next action. No git jargon in user-facing output.
  </done>
</task>

</tasks>

<verification>
1. Resume skill has dynamic context injection for STATE.md, git log, git diff, and config.json
2. Break length calculation reads Last session from STATE.md
3. Four tone tiers defined (under 2h, 2-24h, 1-7d, 7d+)
4. Last session reconstruction reads Recent Activity section
5. External change detection filters out build artifacts, IDE files, .director/
6. Modified files cross-referenced with next task scope
7. Progress snapshot present
8. Suggested next action at the end (LOCKED format)
9. Language reminders prohibit git jargon
10. Example outputs demonstrate both short and long break tones
</verification>

<success_criteria>
- `/director:resume` reconstructs the last session in plain language
- External changes are detected, filtered for noise, and cross-referenced with upcoming work
- Tone adapts naturally based on break length (efficient for short, warm for long)
- Every resume ends with a suggested next action
- No git jargon, file paths, or technical details in user-facing output
- All locked decisions honored: last session + changes + suggestion format
</success_criteria>

<output>
After completion, create `.planning/phases/06-progress-continuity/06-04-SUMMARY.md`
</output>
