---
phase: 07.1-user-decisions-context
plan: 01
subsystem: context
tags: [decisions, step-template, builder-agent, context-assembly, xml-tags]

# Dependency graph
requires:
  - phase: 01-plugin-foundation
    provides: STEP.md template, builder agent, context management reference
provides:
  - STEP.md template with Decisions section (Locked/Flexible/Deferred categories)
  - Builder agent with decision awareness rules (rule 9)
  - Context reference with <decisions> tag documented in table, example, profiles, and truncation
affects: [07.1-02 (build skill context assembly), 07.1-03 (blueprint decision capture)]

# Tech tracking
tech-stack:
  added: []
  patterns: [Locked/Flexible/Deferred decision taxonomy in STEP.md]

key-files:
  created: []
  modified:
    - skills/blueprint/templates/step-template.md
    - agents/director-builder.md
    - reference/context-management.md

key-decisions:
  - "Decisions section goes LAST in STEP.md template (after Needs First)"
  - "Builder is the only agent that receives <decisions> context (Yes in profiles table)"
  - "<decisions> tag positioned between <current_step> and <task> in assembly order"
  - "Decisions are never truncated (added as rule 5 alongside task and vision)"

patterns-established:
  - "Three-category decision taxonomy: Locked (non-negotiable), Flexible (AI discretion), Deferred (out of scope)"
  - "Optional context sections: <decisions> tag omitted entirely when no decisions exist"

# Metrics
duration: 1m 34s
completed: 2026-02-09
---

# Phase 7.1 Plan 01: Decisions Schema & Consumer Awareness Summary

**STEP.md template with Locked/Flexible/Deferred Decisions section, builder agent rule 9 for honoring decisions, and context reference documenting the `<decisions>` XML tag**

## Performance

- **Duration:** 1m 34s
- **Started:** 2026-02-09T02:40:54Z
- **Completed:** 2026-02-09T02:42:28Z
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments
- STEP.md template now includes a Decisions section with three categories (Locked, Flexible, Deferred) that the blueprint skill can populate from user conversations
- Builder agent understands the `<decisions>` XML tag and has explicit rules for honoring each decision category
- Context management reference documents the new tag consistently across the standard tags table, assembly example, agent profiles, and truncation strategy

## Task Commits

Each task was committed atomically:

1. **Task 1: Add Decisions section to STEP.md template** - `c576828` (feat)
2. **Task 2: Update builder agent and context reference for decisions awareness** - `9b4e921` (feat)

## Files Created/Modified
- `skills/blueprint/templates/step-template.md` - Added ## Decisions section with ### Locked, ### Flexible, ### Deferred subsections
- `agents/director-builder.md` - Added `<decisions>` tag to Context You Receive, added rule 9 (Honor user decisions) to Execution Rules
- `reference/context-management.md` - Added `<decisions>` row to Standard Tags table, `<decisions>` section to Assembly Example, Decisions column to Agent-Specific Context Profiles (Builder=Yes only), truncation rule 5

## Decisions Made
- Decisions section placed LAST in STEP.md template (after Needs First), matching research recommendation for natural reading flow
- Builder is the only agent receiving decisions context -- decisions are only relevant during build execution
- `<decisions>` tag positioned between `<current_step>` and `<task>` in the assembly order, following the context ordering rule (vision > scoping > context > instructions)
- Decisions added to the "never truncate" list as rule 5, since they are essential for correct execution and small (~100 tokens)

## Deviations from Plan

None -- plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None -- no external service configuration required.

## Next Phase Readiness
- STEP.md template schema is in place for Plan 02 (build skill context assembly) to load and wrap decisions
- Builder agent already knows how to interpret `<decisions>` -- Plan 02 just needs to provide the content
- Context reference is consistent with the new tag for Plan 03 (blueprint decision capture) to reference

## Self-Check: PASSED

---
*Phase: 07.1-user-decisions-context*
*Completed: 2026-02-09*
