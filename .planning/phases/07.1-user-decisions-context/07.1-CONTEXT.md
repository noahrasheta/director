# Phase 7.1: User Decisions Context - Context

**Gathered:** 2026-02-08
**Status:** Ready for planning

<domain>
## Phase Boundary

Close the gap where user decisions from the blueprint conversation get lost before reaching the builder agent. Add a Decisions section to STEP.md with three categories (Locked, Flexible, Deferred), update the build skill's context assembly to load and present these decisions, and update the blueprint skill's planner to capture decisions during planning.

</domain>

<decisions>
## Implementation Decisions

### Decision categories
- Three categories: Locked (non-negotiable), Flexible (AI decides), Deferred (out of scope)
- Flat list format — one decision per bullet under each category (steps are narrow enough that grouping adds overhead)
- Deferred includes both explicit punts AND adjacent-scope items the builder should avoid (proactive scope creep prevention)

### Claude's Discretion: Category thresholds
- What qualifies as Locked vs Flexible — Claude determines the threshold based on how explicit the user was (stated preferences + strong implications)
- Flexible items should include relevant context from the conversation when available (guided flexibility, not bare)

### Capture flow
- Decisions captured at step granularity only (in STEP.md, not task files) — tasks inherit from their step
- Blueprint infers decisions from existing conversation rather than adding extra question passes — no additional interview burden
- Existing decisions preserved during blueprint updates — consistent with "completed work is FROZEN" principle from Phase 3
- Only new or modified steps get fresh decisions during updates

### Builder consumption
- Strict enforcement of Locked decisions — deviation is a verification failure, not a judgment call
- Builder agent prompt gets explicit category instructions: "Honor Locked exactly. Use judgment on Flexible. Do not implement Deferred."
- Conflicts between task description and Locked decision: builder flags the conflict in verification output rather than silently choosing

### Claude's Discretion: Builder context placement
- Whether decisions are read inline from STEP.md or extracted into a separate XML boundary tag — Claude decides based on what gives the builder clearest signal
- Whether to update the agent context profiles reference doc

### Backward compatibility
- Silent skip when STEP.md has no Decisions section — builder behaves exactly like today, no warning
- STEP.md template updated so new files include the Decisions section — existing files untouched
- Blueprint update mode: Claude decides whether modified existing steps get retrofitted with Decisions sections

</decisions>

<specifics>
## Specific Ideas

- Flat list recommended over grouped format — builder reads decisions as quick context, not a reference document
- Template migration (not file migration) — update the template, leave existing STEP.md files alone
- Preserve-on-update aligns with Phase 3's existing FROZEN principle for consistency across the system

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 07.1-user-decisions-context*
*Context gathered: 2026-02-08*
